<!DOCTYPE html>
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="./base-container.html">
<link rel="import" href="./shared-container-styles.html">
<link rel="import" href="./grid-cell.html">
<dom-module id="grid-container">
    <template>
        <style include="shared-container-styles">
            /* instance specific style */
        </style>
    </template>
    <script>
        /**
        * Extends shared container (with grid support)
        */
        class GridContainer extends BaseContainerMixin(Polymer.Element) {
            static get is() { return 'grid-container'; }

            /**
            * when the size changes rebuild cells
            */
            _sizeChanged() {
                super._sizeChanged();
                this.style.setProperty('--size', this.size || 0);
                this.__removeCells();
                if(this.size > 0) {
                    this.__addCells();
                }
            }

            __addCells() {
                let cell, index;
                while(this.cells.length < this.maxSize) {
                    cell = this.shadowRoot.appendChild(new GridCell());
                    this.cells.push(cell);
                }
            }

            __removeCells() {
                if(!this.cells) return;
                while(this.cells.length > 0) {
                    let cell = this.cells.pop();
                    cell.remove();
                }
            }

        }
        customElements.define(GridContainer.is, GridContainer);
    </script>
</dom-module>